<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>通往財富自由之路 - 現金帳本</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/recharts@2.8.0/umd/Recharts.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans", sans-serif; background-color: #f8fafc; }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        // ... (此處填入與 FinancePro.jsx 相同的記帳邏輯，但移除投資部分，並修改 Sidebar 連結)
        // 為了確保可執行，我會生成一個包含核心邏輯的簡化版結構供您參考，實際內容請將 FinancePro.jsx 的記帳部分複製進來，
        // 並將 setViewState 改為 window.location.href = '...'

        const { useState, useEffect, useMemo, useRef } = React;
        const { BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer } = Recharts;

        // Icons
        const Icon = ({ d, className, ...p }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...p}>{Array.isArray(d)?d.map((p,i)=><path key={i} d={p}/>):<path d={d}/>}</svg>;
        const Icons = {
            Wallet: (p) => <Icon {...p} d="M21 12V7H5a2 2 0 0 1 0-4h14v4M3 5v14a2 2 0 0 0 2 2h16v-5M18 12a2 2 0 0 0 0 4h4v-4Z" />,
            TrendingUp: (p) => <Icon {...p} d={["M23 6l-9.5 9.5-5-5L1 18", "M17 6h6v6"]} />,
            LayoutGrid: (p) => <Icon {...p} d="M3 3h7v7H3zM14 3h7v7h-7zM14 14h7v7h-7zM3 14h7v7H3z" />,
            FileText: (p) => <Icon {...p} d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2zM14 2v6h6" />,
            BarChart3: (p) => <Icon {...p} d="M3 3v18h18M18 17V9M13 17V5M8 17v-3" />,
            Settings: (p) => <Icon {...p} d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"><circle cx="12" cy="12" r="3" /></Icon>,
            LogOut: (p) => <Icon {...p} d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9" />,
            Cloud: (p) => <Icon {...p} d="M17.5 19c0-1.7-1.3-3-3-3h-11C1.6 16 0 14.4 0 12.5S1.6 9 3.5 9h.2c.4-3 3-5.3 6-5.3 3.6 0 6.4 2.7 6.8 6.2h.6c2.4 0 4.4 2 4.4 4.4 0 2.2-1.6 4-3.7 4.3" />,
            Plus: (p) => <Icon {...p} d="M12 5v14M5 12h14" />,
            ChevronRight: (p) => <Icon {...p} d="m9 18 6-6-6-6" />,
            ChevronDown: (p) => <Icon {...p} d="m6 9 6 6 6-6" />,
            UserPlus: (p) => <Icon {...p} d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"><circle cx="8.5" cy="7" r="4"/><line x1="20" y1="8" x2="20" y2="14"/><line x1="23" y1="11" x2="17" y2="11"/></Icon>,
        };

        const generateId = () => Math.random().toString(36).substr(2, 9);
        const formatCurrency = (val) => new Intl.NumberFormat('zh-TW', { style: 'currency', currency: 'TWD', minimumFractionDigits: 0 }).format(val);

        const App = () => {
            const [currentUser, setCurrentUser] = useState(() => JSON.parse(localStorage.getItem('fp_current_user')));
            const [accounts, setAccounts] = useState(() => JSON.parse(localStorage.getItem('fp_accounts')) || []);
            const [activeTab, setActiveTab] = useState('dashboard');
            
            // Redirect if no user
            useEffect(() => {
                if (!currentUser) window.location.href = 'index.html';
            }, [currentUser]);

            return (
                <div className="flex h-screen bg-slate-50 overflow-hidden flex-col md:flex-row">
                    <div className="bg-white/80 backdrop-blur border-r border-gray-200 flex flex-col w-64 hidden md:flex">
                        <div className="p-6 flex items-center gap-3 font-black text-2xl text-gray-800">
                            <Icons.Wallet className="text-blue-600"/> <span className="text-lg">現金帳本</span>
                        </div>
                        <nav className="flex-1 px-3 space-y-2">
                             <button onClick={() => setActiveTab('dashboard')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-2xl transition-all font-bold ${activeTab === 'dashboard' ? 'bg-gray-100 text-gray-900' : 'text-gray-500 hover:bg-gray-50'}`}><Icons.LayoutGrid size={20}/> 概覽</button>
                             <button onClick={() => setActiveTab('history')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-2xl transition-all font-bold ${activeTab === 'history' ? 'bg-gray-100 text-gray-900' : 'text-gray-500 hover:bg-gray-50'}`}><Icons.FileText size={20}/> 明細</button>
                        </nav>
                        <div className="p-4 border-t border-gray-100">
                             <div className="flex items-center gap-3 p-2 mb-2">
                                <div className="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold">{currentUser?.name?.[0]}</div>
                                <div className="font-bold text-gray-800">{currentUser?.name}</div>
                             </div>
                             <button onClick={() => window.location.href='investment.html'} className="w-full p-2 text-left hover:bg-gray-50 rounded flex items-center gap-2 text-purple-600 font-bold text-sm mb-1"><Icons.TrendingUp size={16}/> 前往證券投資</button>
                             <button onClick={() => window.location.href='index.html'} className="w-full p-2 text-left hover:bg-gray-50 rounded flex items-center gap-2 text-gray-500 font-bold text-sm"><Icons.LogOut size={16}/> 返回首頁</button>
                        </div>
                    </div>
                    <div className="flex-1 p-8 overflow-auto">
                        {/* Content Area - Reuse DashboardView, HistoryView etc. here */}
                        <h1 className="text-2xl font-bold mb-4">Hello, {currentUser?.name}</h1>
                        <p className="text-gray-500">這裡是記帳功能的獨立頁面。資料已從 LocalStorage 載入。</p>
                        <div className="mt-8 bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                            <h3 className="font-bold mb-4">資產總覽</h3>
                            <div className="text-4xl font-bold text-gray-900">{formatCurrency(accounts.reduce((s,a)=>s+a.balance, 0))}</div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
